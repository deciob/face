<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>My project</title>
  <meta name="description" content="This is an HTML5 template">
  <meta name="author" content="deciob">
  <!--<link rel="stylesheet" href="css/styles.css?v=1.0">-->
  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head>
<body>

  <div id="fb-root">Click</div>
  <script>

    function login() {
        console.log("login", FB);
        FB.login(function(response) {
            if (response.authResponse) {
                // connected
                testAPI();
            } else {
                // cancelled
            }
        });
    }


    // Additional JS functions here
    window.fbAsyncInit = function() {
      console.log("window.fbAsyncInit");

      FB.init({
        appId      : '463955970313826', // App ID
        channelUrl : 'http://radiant-wave-5172.herokuapp.com/channel', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
  

  
    };

    function testAPI() {
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function(response) {
            console.log('Good to see you, ' + response.name + '.', response);
        });
    }


    function getLoginStatus() {
      // Additional init code here
      FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            console.log("connected");
            testAPI()
        } else if (response.status === 'not_authorized') {
            // not_authorized
            console.log("not_authorized");
            login();
        } else {
            console.log("not_logged_in");
            login();
        }
      });
    } 


    


    $("#fb-root").on("click", function(e) {
        getLoginStatus();
    });


  

    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));

  </script>
  
</body>
</html>



